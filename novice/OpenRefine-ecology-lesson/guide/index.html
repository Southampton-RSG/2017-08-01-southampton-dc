<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2017-04-05 12:47:24 +0100">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicon-dc.ico" />
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>Open Refine for Ecology: Instructor Notes</title>
  </head>
  <body>
    <div class="container">
      
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="http://datacarpentry.org" class="pull-left">
        <img class="navbar-logo" src="../assets/img/dc-icon-black.svg" alt="Data Carpentry logo" />
      </a>
      

      
      <a class="navbar-brand" href="../">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../conduct/">Code of Conduct</a></li>

	
        
        <li><a href="../setup/">Setup</a></li>
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../00-getting-started/">Introduction</a></li>
            
            <li><a href="../01-working-with-openrefine/">Working with OpenRefine</a></li>
            
            <li><a href="../02-filter-exclude-sort/">Filtering and Sorting with OpenRefine</a></li>
            
            <li><a href="../03-numbers/">Examining Numbers in OpenRefine</a></li>
            
            <li><a href="../04-scripts/">Scripts from OpenRefine</a></li>
            
            <li><a href="../05-save-export/">Exporting and Saving Data from OpenRefine</a></li>
            
            <li><a href="../06-resources/">Other Resources in OpenRefine</a></li>
            
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference/">Reference</a></li>
            
            <li><a href="../about/">About</a></li>
            
            <li><a href="../discuss/">Discussion</a></li>
            
            <li><a href="../figures/">Figures</a></li>
            
            <li><a href="../guide/">Instructor Notes</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../license/">License</a></li>
	
	<li><a href="/edit/gh-pages/_extras/guide.md">Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>


<h1 class="maintitle"><a href="../">Open Refine for Ecology</a>: Instructor Notes</h1>

<h1 id="lesson">Lesson</h1>

<h2 id="opening-openrefine">Opening OpenRefine</h2>
<p>If you are using a browser other than Firefox, or OpenRefine does not automatically open for you when you click the .exe file, point your browser at http://127.0.0.1:3333/ or http://localhost:3333 to launch the program.</p>

<h2 id="creating-a-project">Creating a Project</h2>

<p>Start the program. (Double-click on the google-refine.exe file. Java services will start on your machine, and OpenRefine will open in your Firefox browser).</p>

<p>Note the file types OpenRefine handles: TSV, CSF, *SV, Excel (.xls .xlsx), JSON, XML, RDF as XML, Google Data documents. Support for other formats can be added with OpenRefine extensions.</p>

<p>In this first step, we’ll browse our computer to the sample data file for this lesson (If you haven’t already, download the data from:
https://www.dropbox.com/s/kbb4k00eanm19lg/Portal_rodents_19772002_scinameUUIDs.csv). In this case, I’ve modified the Portal_rodents.csv file. I added several columns: scientificName, locality, county, state, country and I generated several more columns in the lesson itself (JSON, decimalLatitude, decimalLongitude). Data in locality, county, country, JSON, decimalLatitude and decimalLongitude are contrived and are in no way related to the original dataset.</p>

<p><strong>Once OpenRefine is open, you’ll be asked if you want to Create, Open, or Import a Project.</strong></p>

<ul>
  <li>Click Browse, find Portal_rodents_19772002_scinameUUIDs.csv</li>
  <li>Click next to open Portal_rodents_19772002_scinameUUIDs.csv</li>
  <li>OpenRefine gives you a preview - a chance to show you it understood the file. If, for example, your file was really tab-delimited, the preview might look strange, you would choose the correct separator in the box shown and click “update preview.”</li>
  <li>If all looks well, click <em>Create Project.</em></li>
</ul>

<h2 id="faceting">Faceting</h2>

<p><em>Exploring data by applying multiple filters</em></p>

<p>OpenRefine supports faceted browsing as a mechanism for</p>

<ul>
  <li>seeing a big picture of your data, and</li>
  <li>filtering down to just the subset of rows that you want to change in bulk.</li>
</ul>

<p>Typically, you create a facet on a particular column. The facet summarizes the cells in that column to give you a big picture of that column, and allows you to filter to some subset of rows for which their cells in that column satisfy some constraint. That’s a bit abstract, so let’s jump into some examples.</p>

<p><a href="https://github.com/OpenRefine/OpenRefine/wiki/Faceting">More on faceting</a></p>

<ul>
  <li>Scroll over to the scientificName column</li>
  <li>Click the down arrow and choose Facet &gt; Text facet</li>
  <li>In the left margin, you’ll see a box containing every unique value in the scientificName column and OpenRefine shows you how many times that value occurs in the column (a count), and allows you to sort (order) your facets by name or count.</li>
  <li>Edit. Note that at any time, in any cell of the Facet box, or data cell in the OpenRefine window, you have access to “edit” and can fix an error immediately. OpenRefine will even ask you if you’d like to make that same correction to every value it finds like that one (or not).</li>
</ul>

<h2 id="cluster">Cluster</h2>
<p>In OpenRefine, clustering refers to the operation of “finding groups of different values that might be alternative representations of the same thing”. For example, the two strings “New York” and “new york” are very likely to refer to the same concept and just have capitalization differences. Likewise, “Gödel” and “Godel” probably refer to the same person.</p>

<p>One of the most magical bits of OpenRefine, the moment you realize what you’ve been missing. OpenRefine has several clustering algorithms built in. Experiment with them, and learn more about these algorithms and how they work.</p>

<p><a href="https://github.com/OpenRefine/OpenRefine/wiki/Clustering-In-Depth">More on clustering</a></p>

<ul>
  <li>In this example, in the scientificName Text Facet we created in the step above, click the <em>Cluster</em> button.</li>
  <li>In the resulting pop-up window, you can change the algorithm method, and keying function. Try different combinations to see the difference.</li>
  <li>For example, with this dataset, the <em>nearest neighbor</em> method with the <em>PPM</em> keying function shows the power of clustering the best.</li>
  <li>Intentional errors in these scientific names have been introduced to show how errors (typos) in any position can be found with this method. All errors can then be fixed by simply entering the correct value in the box on the right. Often, the algorithm has guessed correctly.</li>
  <li>After corrections are made in this window, you can either Merge and Close the Cluster pop-up, or Merge and Re-cluster.</li>
</ul>

<h2 id="split--leading---trailing-whitespace--undo---redo">Split / Leading - Trailing Whitespace / Undo - Redo</h2>

<p>If data in a column needs to be split into multiple columns, and the strings in the cells are separated by a common separator (say a comma, or a space), you can use that separator to divide up the bits into their own columns.</p>

<ul>
  <li>Go to the drop-down tab at the top of the column that you need to split into multiple columns</li>
  <li>For example, go to the scientificName column &gt; from drop-down choose Edit Column &gt; Split into several columns</li>
  <li>In the pop-up, for separator, remove the comma, put in a space</li>
  <li>Remove the check in the box that says “remove column after splitting”</li>
  <li>You’ll get two extra columns called, in this case: scientificName 1, scientificName 2</li>
  <li>This will reveal an error in a few names that have spaces at the beginning (so-called leading white space).</li>
  <li>These can be easily removed with another OpenRefine feature in the column drop-down choices. See drop-down: Edit cells &gt; Common transforms &gt; Remove leading and trailing whitespace</li>
  <li>To Undo create columns, look just above the scientificName cluster in the left side of the screen. Click where it says Undo / Redo. Click back one step (all steps, all changes are saved here). Just go back to the previous step and click. The extra columns will be gone.</li>
</ul>

<h2 id="scripts">Scripts</h2>

<ul>
  <li>OpenRefine saves every change, every edit you make to the dataset in a file you can save on your machine.</li>
  <li>IF you had 20 files to clean, and they all had the same type of errors, and all files had the same columns, you could save the script, open a new file to clean, paste in the script and run it. Voila, clean data.</li>
  <li>In the Undo / Redo section, click Extract, save the bits desired using the check boxes. Save the code in a .txt file. To run these steps on a new dataset, import the new dataset into OpenRefine, open the Extract / Apply section, paste in the .txt file, click Apply.</li>
</ul>

<h2 id="export">Export</h2>

<ul>
  <li>Save your work when you are done by exporting it in the desire format. Save your files with meaningful names, no spaces. OpenRefine does not change your original dataset.</li>
</ul>

<h4 id="time-estimate-for-this-demo">Time estimate for this demo.</h4>
<ul>
  <li>Takes about 100-115 minutes to do a good demo with learners installing the tool and working through the demo.</li>
  <li>Mac users with the newest operating system will have to allow this to run by “allowing everything” to run. They can change the setting back after the exercise.</li>
  <li>Some students will run into issues with
    <ul>
      <li>unzipping</li>
      <li>finding the .exe file once the software has been unzipped</li>
      <li>finding the data file on their computers after downloading</li>
    </ul>
  </li>
</ul>


      
      
<footer>
  <div class="row">
    <div class="col-md-6" align="left">
      <h4>
	Copyright &copy; 2016–2017
	
	<a href="http://datacarpentry.org">Data Carpentry</a>
	
      </h4>
    </div>
    <div class="col-md-6" align="right">
      <h4>
	
	<a href="/edit/gh-pages/_extras/guide.md">Edit on GitHub</a>
	
	/
	<a href="/blob/gh-pages/CONTRIBUTING.md">Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob/gh-pages/CITATION">Cite</a>
	/
	<a href="mailto:lessons@datacarpentry.org">Contact</a>
      </h4>
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
